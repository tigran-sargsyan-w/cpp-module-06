# **************************************************************************** #
#                                Makefile (C++)                                #
# **************************************************************************** #

NAME     := convert

CXX      := c++
CXXFLAGS := -Wall -Wextra -Werror -std=c++98 -g3

OBJDIR   := obj

SRCS     := main.cpp \
            ScalarConverter.cpp

OBJS     := $(addprefix $(OBJDIR)/, $(SRCS:.cpp=.o))
DEPS     := $(OBJS:.o=.d)

# **************************************************************************** #
#                                   Rules                                      #
# **************************************************************************** #

all: $(NAME)
	@echo "âœ… $(NAME) built successfully!"

$(NAME): $(OBJS)
	@$(CXX) $(CXXFLAGS) $(OBJS) -o $@
	@echo "ðŸš€ Linked: $(NAME)"

$(OBJDIR)/%.o: %.cpp | $(OBJDIR)
	@$(CXX) $(CXXFLAGS) -MMD -MP -c $< -o $@
	@echo "ðŸ”§ Compiled: $<"

$(OBJDIR):
	@mkdir -p $(OBJDIR)

clean:
	@rm -rf $(OBJDIR)
	@echo "ðŸ§¹ Cleaned objects."

fclean: clean
	@rm -f $(NAME)
	@echo "ðŸ—‘ï¸  Removed binary."

re: fclean all

-include $(DEPS)

.PHONY: all clean fclean re
